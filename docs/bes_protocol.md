# Протокол передачи сообщений между серверным и клиентским приложением
Сообщения передаются с помощью SSL/TLS протокола. В нашем случае используются QSslSocket'ы. 
Для упрощения анализа запросов и ответов мы используем JSON-объекты (QJsonObject)

Обычно, в кодах ответа возвращается либо 0, либо 1. Значение 0 означает успешное выполнение запроса, значение 1 - ошибку.

## Регистрация нового аккаунта (РЕГИСТРАЦИЯ)
Формат запроса:
```
{
    "тип_запроса":"РЕГИСТРАЦИЯ",
    "имя":"",
    "фамилия":"",
    "почта":"",
    "пароль":""
}
```
Формат ответа:
```
{
    "тип_запроса":"РЕГИСТРАЦИЯ",
    "код_ответа": 0 или 1
}
```
## Вход пользователя в аккаунт (ВХОД)
Формат запроса:
```
{
    "тип_запроса":"ВХОД",
    "почта":"",
    "пароль":""
}
```
Формат ответа:
```
{
    "тип_запроса":"ВХОД",
    "код_ответа":"",
    "ид_пользователя": целое беззнаковое число
}
```
## Получение списка всех пользователей (СПИСОК_ПОЛЬЗОВАТЕЛЕЙ)
Формат запроса:
```
{
    "тип_запроса":"СПИСОК_ПОЛЬЗОВАТЕЛЕЙ"
}
```
Формат ответа:
```
{
    "тип_запроса":"СПИСОК_ПОЛЬЗОВАТЕЛЕЙ",
    "пользователи":[
        {
            "ид_пользователя": целое беззнаковое число,
            "имя":"",
            "фамилия":"",
            "почта":""
        },
        ...n блоков того же формата
    ]
}
```
## Получение списка всех чатов пользователя (СПИСОК_ЧАТОВ_ПОЛЬЗОВАТЕЛЯ)
Формат запроса:
```
{
    "тип_запроса":"СПИСОК_ЧАТОВ_ПОЛЬЗОВАТЕЛЯ"
}
```
Формат ответа:
```
{
    "тип_запроса":"СПИСОК_ЧАТОВ_ПОЛЬЗОВАТЕЛЯ",
    "чаты": [
        {
            "ид_чата": целое число,
            "название_чата":""
        },
        ...n блоков того же формата
    ]
}
```
## Получение списка пользователей чата (СПИСОК_УЧАСТНИКОВ_ЧАТА)
Формат запроса:
```
{
    "тип_запроса":"СПИСОК_УЧАСТНИКОВ_ЧАТА",
    "ид_чата": целое число
}
```
Формат ответа:
```
{
    "тип_запроса":"СПИСОК_УЧАСТНИКОВ_ЧАТА",
    "ид_пользователей":[
        {
            "ид_пользователя": целое число
        },
        ...n блоков того же формата
    ]
}
```
## Получение непрочитанных сообщений из чата (НЕПРОЧИТАННЫЕ_СООБЩЕНИЯ)
Формат запроса:
```
{
    "тип_запроса":"НЕПРОЧИТАННЫЕ_СООБЩЕНИЯ",
    "ид_чата": целое беззнаковое число,
    "временная_метка": временная метка
}
```
Формат ответа:
```
{
    "тип_запроса":"НЕПРОЧИТАННЫЕ_СООБЩЕНИЯ",
    "сообщения":[
        {
            "ид_сообщения": целое беззнаковое число,
            "тело_сообщения":"",
            "ид_отправителя": целое беззнаковое число,
            "время_отправления": временная метка
        },
        ...n блоков того же формата
    ]
}
```
## Отправление сообщений (ОТПРАВИТЬ_СООБЩЕНИЕ)
Формат запроса:
```
{
    "тип_запроса":"ОТПРАВИТЬ_СООБЩЕНИЕ",
    "ид_чата": целое беззнаковое число,
    "тело_сообщения":""
}
```
Формат ответа:
```
{
    "тип_запроса":"ОТПРАВИТЬ_СООБЩЕНИЕ",
    "время_отправки": целое беззнаковое число
}
```
## Создание чата (СОЗДАТЬ_ЧАТ)
Формат запроса:
```
{
    "тип_запроса":"СОЗДАТЬ_ЧАТ",
    "название_чата": ""
}
```
Формат ответа:
```
{
    "тип_запроса":"СОЗДАТЬ_ЧАТ",
    "ид_чата": целое беззнаковое
    "код_ответа": 0 или 1
}
```
## Удаление чата (УДАЛИТЬ_ЧАТ)
Формат запроса:
```
{
    "тип_запроса":"УДАЛИТЬ_ЧАТ",
    "ид_чата": целое беззнаковое число
}
```
Формат ответа:
```
{
    "тип_запроса":"УДАЛИТЬ_ЧАТ",
    "код_ответа": 0 или 1
}
```
## Приглашение пользователя в чат (ПРИГЛАСИТЬ_В_ЧАТ)
Формат запроса:
```
{
    "тип_запроса":"ПРИГЛАСИТЬ_В_ЧАТ",
    "ид_чата": целое беззнаковое число,
    "ид_пользователя: целое беззнаковое число
}
```
Формат ответа:
```
{
    "тип_запроса":"ПРИГЛАСИТЬ_В_ЧАТ",
    "код_ответа": целое беззнаковое число
}
```
## Исключение пользователя из чата (ИСКЛЮЧИТЬ_ИЗ_ЧАТА)
Формат запроса:
```
{
    "тип_запроса":"ИСКЛЮЧИТЬ_ИЗ_ЧАТА",
    "ид_чата": целое беззнаковое число,
    "ид_пользователя": целое беззнаковое число
}
```
Формат ответа:
```
{
    "тип_запроса":"ИСКЛЮЧИТЬ_ИЗ_ЧАТА",
    "код_ответа": 0 или 1
}
```
## Синхронизация (СИНХРОНИЗАЦИЯ)
Формат запроса:
```
{
    "тип_запроса":"СИНХРОНИЗАЦИЯ",
    "временная_метка": временная метка
}
```
Форма ответа:
```
{
    "тип_запроса":"СИНХРОНИЗАЦИЯ",
    "чаты": [
        {
            "ид_чата": целое беззнаковое число,
            "сообщения": [
                {
                    "тело_сообщения":"",
                    "ид_отправителя": целое беззнаковое число,
                    "время_отправления": временная метка
                },
            ...n сообщений
            ]  
        },
        ...m чатов
    ]
}
```